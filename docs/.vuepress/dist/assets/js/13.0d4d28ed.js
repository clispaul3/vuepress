(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{218:function(t,e,n){"use strict";n.r(e);var i=n(0),a=Object(i.a)({},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("ol",[n("li",[t._v("注册驱动(注册一次)\n"),n("ul",[n("li",[n("a",{attrs:{href:"https://repo.maven.apache.org/maven2/mysql/mysql-connector-java/",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql驱动"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("Properties => Java Build Path => Add External JARS...")])]),t._v(" "),t._m(4)]),t._v(" "),t._m(5),t._v(" "),n("li",[t._v("创建sql语句(Statement)")]),t._v(" "),n("li",[t._v("执行sql语句")]),t._v(" "),n("li",[t._v("处理结果集(ResultSet)")]),t._v(" "),n("li",[t._v("释放资源")])]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"jdbc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jdbc","aria-hidden":"true"}},[this._v("#")]),this._v(" JDBC")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#架构","aria-hidden":"true"}},[this._v("#")]),this._v(" 架构")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/img/java-jdbc.jpg",alt:"架构"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"连接步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接步骤","aria-hidden":"true"}},[this._v("#")]),this._v(" 连接步骤")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('  package cn.zyb.jdbc;\n  import java.sql.Connection;\n  import java.sql.DriverManager;\n  import java.sql.ResultSet;\n  import java.sql.SQLException;\n  import java.sql.Statement;\n  public class ConnectMysql {\n      private static final String URL = "jdbc:mysql://localhost:3306/ecshop";\n      private static final String USER = "zyb";\n      private static final String PASSWORD = "13265987092";\n      public static void main(String[] args) {\n          try {\n              // 注册驱动\n              Class.forName("com.mysql.jdbc.Driver");\n              // 建立连接\n              long start = System.currentTimeMillis();\n              Connection $link = DriverManager.getConnection(URL, USER, PASSWORD);\n              long end = System.currentTimeMillis();\n              System.out.println(end-start);\n              // 创建Sql语句\n              Statement sql = $link.createStatement();\n              // 执行sql语句\n              ResultSet res = sql.executeQuery("select goods_name from ecs_goods");\n              // 处理结果集\n              while(res.next()) {\n                  System.out.println(res.getObject(1));\n              }\n          } catch (ClassNotFoundException e) {\n              e.printStackTrace();\n          } catch (SQLException e) {\n              e.printStackTrace();\n          }\n      }\n  }\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("建立连接(Connection)\n"),e("ul",[e("li",[this._v("建立连接比较耗时")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"statement接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statement接口","aria-hidden":"true"}},[this._v("#")]),this._v(" Statement接口")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("用于执行静态SQL语句并返回它所生成结果的对象")]),t._v(" "),n("li",[t._v("三种Statement类\n"),n("ul",[n("li",[t._v("Statement:\n"),n("ul",[n("li",[t._v("由createStatement创建，用于发送简单的SQL语句(不带参数的)")]),t._v(" "),n("li",[t._v("PrepareStatement:\n"),n("ul",[n("li",[t._v("继承自Statement接口,由prepareStatement创建，用于发送一个或多个\n带输入参数的sql语句。PrepareStatement对象比Statement对象的效率更高，\n并且可以防止sql注入，一般都用PrepareStatement")])])])])])])]),t._v(" "),n("li",[t._v("常用的Statement方法：\n"),n("ul",[n("li",[t._v("excute(): 运行语句，返回是否有结果集 // 返回结果是 true/false")]),t._v(" "),n("li",[t._v("executeQuery(): 运行select语句，返回ResultSet结果集")]),t._v(" "),n("li",[t._v("executeUpdate(): 运行insert/delete/update操作，返回更新的行数")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"resultset接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resultset接口","aria-hidden":"true"}},[this._v("#")]),this._v(" ResultSet接口")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("常用方法\n"),e("ul",[e("li",[this._v("rs.next()：返回值true/false")]),this._v(" "),e("li",[this._v("rs.getObject(idx): 获取字段值，idx: 第几列的值(从1开始)")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"释放资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#释放资源","aria-hidden":"true"}},[this._v("#")]),this._v(" 释放资源")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("关闭顺序：ResultSet--\x3eStatement--\x3eConnection")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("rs.close()")]),this._v(" "),e("li",[this._v("sql.close()")]),this._v(" "),e("li",[this._v("$link.close()")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"批处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#批处理","aria-hidden":"true"}},[this._v("#")]),this._v(" 批处理")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Batch")]),this._v(" "),e("li",[this._v("处理大量数据使用Statement，因为PrepareStatement的预编译空间有限，当数据量大时，容易发生异常")]),this._v(" "),e("li",[this._v("$link.setAutoCommit(false); // 设为手动提交")]),this._v(" "),e("li",[this._v("$link.commit(); // 提交事务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v(' Connection $link = DriverManager.getConnection(URL, USER, PASSWORD);\n $link.setAutoCommit(false); // 设为手动提交\n Statement stmt = $link.createStatement();\n for(int i=0;i<20000;i++) {\n     String sqlString = "insert into user values(null,"+"\'jdbc-"+i+"\'"+",md5(123456)"+")";\n     String sqlString2 = "delete from user where user_name="+"\'jdbc-"+i+"\'";\n     stmt.addBatch(sqlString2);\n }\n stmt.executeBatch();\n $link.commit(); // 提交事务\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"事务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#事务","aria-hidden":"true"}},[this._v("#")]),this._v(" 事务")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("基本概念：一组要么同时执行成功，要么同时执行失败的SQL语句，是数据库操作的一个执行单元")]),t._v(" "),n("li",[t._v("特点(ACID)\n"),n("ol",[n("li",[t._v("原子性(atomicity)：事务内的所有操作是一个整体，要么全部成功，要么全部失败")]),t._v(" "),n("li",[t._v("一致性(consistency)：事务内有一个操作失败时，所有的更改过的数据都必须回滚到修改前的状态")]),t._v(" "),n("li",[t._v("隔离性(isolation)：事务查看数据的状态时，不会查看数据的中间状态\n"),n("ul",[n("li",[t._v("事务隔离级别从低到高\n"),n("ol",[n("li",[t._v("读取未提交")]),t._v(" "),n("li",[t._v("读取已提交")]),t._v(" "),n("li",[t._v("可重复读")]),t._v(" "),n("li",[t._v("序列化")])])])])]),t._v(" "),n("li",[t._v("持久性(durability)：事务完成之后，它对于系统的影响是持久性的")])])]),t._v(" "),n("li",[t._v("提交：connection.commit()")]),t._v(" "),n("li",[t._v("回滚：connection.rollback()")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"时间类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#时间类型","aria-hidden":"true"}},[this._v("#")]),this._v(" 时间类型")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("java.util.Date\n"),n("ul",[n("li",[t._v("子类\n"),n("ol",[n("li",[t._v("java.sql.Date       表示年月日")]),t._v(" "),n("li",[t._v("java.sql.Time       表示时分秒")]),t._v(" "),n("li",[t._v("java.sql.Timestamp  表示年月日时分秒")])])])])]),t._v(" "),n("li",[t._v("日期比较处理\n"),n("ol",[n("li",[t._v("插入随机日期")]),t._v(" "),n("li",[t._v("取出指定日期")])])])])}],!1,null,null,null);a.options.__file="JDBC.md";e.default=a.exports}}]);